SEPARAÇÃO DE RESPONSABILIDADES – TurmaDetalhes.jsx
Boas práticas aplicadas ao projeto CEMEP Digital
=================================================

OBJETIVO
--------
Reduzir complexidade, melhorar legibilidade, facilitar manutenção,
testes e evitar erros de JSX/Babel causados por arquivos excessivamente grandes.


PROBLEMA ATUAL
--------------
O arquivo TurmaDetalhes.jsx concentra:
- Busca de dados (API)
- Gerenciamento de estado
- Regras de negócio
- Lógica de navegação
- Renderização complexa de UI
- Vários fluxos condicionais (ternários aninhados)

Isso viola princípios como:
- Single Responsibility Principle (SRP)
- Separation of Concerns
- Component-driven architecture (React)


ESTRUTURA RECOMENDADA
--------------------
A página deve ser dividida em:
1) Página container (orquestração)
2) Hooks de lógica (dados + regras)
3) Componentes de UI (apresentação)
4) Modais isolados


1. PÁGINA CONTAINER
-------------------
Arquivo:
frontend/src/pages/TurmaDetalhes.jsx

Responsabilidades:
- Ler params da rota (useParams)
- Controlar tabs (disciplinas | representantes | estudantes)
- Orquestrar quais componentes renderizar
- Não conter lógica pesada nem JSX extenso

Exemplo de responsabilidades:
- Estado: activeTab, showUploadModal
- Render:
  - <TurmaHeader />
  - <TurmaTabs />
  - <TurmaDisciplinas /> | <TurmaRepresentantes /> | <TurmaEstudantes />


2. HOOK DE DADOS DA TURMA
------------------------
Arquivo:
frontend/src/hooks/useTurma.js

Responsabilidades:
- Buscar turma
- Controlar loading e erro
- Expor dados prontos para UI

Retorna:
- turma
- loading
- reloadTurma()

Benefícios:
- Reutilizável em outras telas
- Página fica limpa
- Facilita testes unitários


3. HOOK DE DISCIPLINAS DA TURMA
------------------------------
Arquivo:
frontend/src/hooks/useDisciplinasTurma.js

Responsabilidades:
- Buscar disciplinas
- Vincular/desvincular disciplina
- Atualizar aulas semanais
- Calcular total de aulas
- Gerenciar professores vinculados

Retorna:
- todasDisciplinas
- disciplinasVinculadas
- aulasSemanais
- totalAulasSemanais
- loadingDisciplinas
- handlers:
  - toggleDisciplina()
  - updateAulasSemanais()
  - updateProfessores()


4. COMPONENTE DE HEADER
----------------------
Arquivo:
frontend/src/components/turmas/TurmaHeader.jsx

Responsabilidades:
- Exibir título da turma
- Exibir curso e ano letivo
- Botão voltar
- Botão editar

Props:
- turma
- onEdit()
- onBack()

Regra:
- ZERO lógica de negócio
- Apenas apresentação


5. COMPONENTE DE TABS
--------------------
Arquivo:
frontend/src/components/turmas/TurmaTabs.jsx

Responsabilidades:
- Renderizar botões de navegação
- Indicar aba ativa
- Emitir eventos de troca

Props:
- activeTab
- onChangeTab()
- counters (disciplinas, representantes, estudantes)


6. COMPONENTE DE DISCIPLINAS
---------------------------
Arquivo:
frontend/src/components/turmas/TurmaDisciplinas.jsx

Responsabilidades:
- Renderizar lista de disciplinas
- Renderizar inputs de aulas semanais
- Renderizar atribuição de professores
- Delegar lógica para hooks

Subcomponentes:
- DisciplinaCard.jsx
- ProfessorSelector.jsx
- ProfessoresSelecionados.jsx

Regra:
- JSX grande, mas sem lógica complexa
- Toda regra vem via props


7. COMPONENTE DE REPRESENTANTES
-------------------------------
Arquivo:
frontend/src/components/turmas/TurmaRepresentantes.jsx

Responsabilidades:
- MultiCombobox de representantes
- Lista de representantes selecionados
- Remoção individual

Hook associado:
- useRepresentantesTurma.js

Regra:
- Não conhecer API diretamente
- Apenas chamar handlers


8. COMPONENTE DE ESTUDANTES
--------------------------
Arquivo:
frontend/src/components/turmas/TurmaEstudantes.jsx

Responsabilidades:
- Placeholder ou futura listagem
- Zero dependência com disciplinas ou professores


9. MODAL DE UPLOAD
------------------
Arquivo já correto:
components/modals/BulkUploadModal.jsx

Boas práticas:
- Modal não conhece a página
- Recebe callbacks e dados por props
- Reutilizável em outros contextos


ORGANIZAÇÃO FINAL DE PASTAS
---------------------------
frontend/src/
│
├── pages/
│   └── TurmaDetalhes.jsx
│
├── hooks/
│   ├── useTurma.js
│   ├── useDisciplinasTurma.js
│   └── useRepresentantesTurma.js
│
├── components/
│   └── turmas/
│       ├── TurmaHeader.jsx
│       ├── TurmaTabs.jsx
│       ├── TurmaDisciplinas.jsx
│       ├── TurmaRepresentantes.jsx
│       ├── TurmaEstudantes.jsx
│       ├── DisciplinaCard.jsx
│       └── ProfessorSelector.jsx
│
└── modals/
    └── BulkUploadModal.jsx


BENEFÍCIOS DIRETOS
------------------
- Arquivos menores (150–300 linhas)
- JSX simples, sem ternários perigosos
- Lógica testável fora da UI
- Menos bugs de parser
- Manutenção mais rápida
- Facilidade para novos devs e LLMs


REGRA DE OURO
-------------
Se um componente:
- Usa mais de 2 useEffect
- Passa de 300 linhas
- Tem ternários aninhados
- Mistura API + JSX

ENTÃO ELE PRECISA SER QUEBRADO.


CONCLUSÃO
---------
Essa separação segue:
- Clean Code
- React Best Practices
- SOLID (especialmente SRP)
- Escalabilidade do projeto CEMEP Digital

Aplicar essa estrutura evita exatamente o problema
que você acabou de enfrentar.
